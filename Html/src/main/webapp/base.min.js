var _host = "";

var dialog;
var _dict_config = {ss: 1};
var $user_id = 1, $user_name = 1,
    $user_auth = 1;
(function (a) {
    a.fn.slide = function (b) {
        var d = {slideWidth: 150, autoplay: true, duration: 15000, showSlideIndex: true};
        var b = a.extend(d, b);
        return this.each(function () {
            var r = a(this);
            var i = b;
            var j = 0;
            var f = a(".slide");
            var g = f.length;
            var n = '<object type="application/x-shockwave-flash" data="http://dict.cn/apis/output.php?id=flashID" style="width:90px;height:90px;"><param name="AllowScriptAccess" value="always"><param name="wmode" value="opaque"><param name="hasPriority" value="true"></object>';
            j = day ? day : j;

            function q() {
                j = day ? day : j;
                l(j, true);
                h(j);
                if (i.autoplay == true) {
                    p(i.duration)
                }
            }

            function l(o, s) {
                a("#slideInner").stop();
                if (s == false || i.autoplay == false || o != 0) {
                    if (o == 0 && s) {
                        a("#slideInner").css({marginLeft: i.slideWidth / 2})
                    }
                    if (o == g - 1 && !s) {
                        a("#slideInner").css({marginLeft: i.slideWidth * (-g)})
                    }
                    a("#slideInner").animate({marginLeft: i.slideWidth * (-o)}, "", "", function () {
                        h(o);
                        if (i.autoplay == true) {
                            p(i.duration)
                        }
                    })
                } else {
                    a("#slideInner").animate({marginLeft: i.slideWidth * (-g)}, "", "", function () {
                        a("#slideInner").css("marginLeft", 0);
                        h(o);
                        if (i.autoplay == true) {
                            p(i.duration)
                        }
                    })
                }
            }

            function h(o) {
                if (i.showSlideIndex == true) {
                    a("#slideIndex").text(parseInt(o + 1) + "/" + g)
                }
            }
        })
    }
})(jQuery);
var editorPath = (_host == "dict.cn" || _host == "hanyu.dict.cn") ? "http://editor.dict.cn/" : "http://test.editor.dict.cn/";
!function (a) {
}($("#q"));
$(function () {
    $.ie6 = new RegExp("MSIE 6.0").test(window.navigator.userAgent);
    $(".tab_nav li").not(".tn").click(function () {
        var f = $(this).index();
        var g = $(this).parent().parent().next();
        $(this).parent().find("li").removeClass("cur");
        $(this).addClass("cur");
        g.find("li.tab_cc").each(function () {
            if ($(this).index() == f) {
                $(this).show()
            } else {
                $(this).hide()
            }
        });
        $(this).parent().find("li.tdu img").attr("class", "up-icon")
    });
    $(".tab_nav li.tdu a").click(function () {
        var h = $(this).find("img");
        var g = $(this).parent().parent().parent();
        if (h.attr("class") == "up-icon") {
            g.next().find("li.tab_cc").hide();
            h.attr("class", "down-icon")
        } else {
            var f = g.find("ul li.cur").index();
            g.next().find("li.tab_cc").each(function () {
                if ($(this).index() == f) {
                    $(this).show()
                } else {
                    $(this).hide()
                }
            });
            h.attr("class", "up-icon")
        }
    });
    $(".obox-tab a").click(function () {
        $(this).addClass("cur").siblings().removeClass("cur").parents(".obox").find(".obox-c ul").fadeOut(0).eq($(this).index()).fadeIn(0)
    }).eq(0).trigger("click");
    $(".main .more a").click(function () {
        var g = $(this).find("img");
        var f = $(this).parent().parent();
        if (g.hasClass("mdown")) {
            f.find(".morec").hide();
            g.removeClass("mdown");
            $(this).find("span").html(" �鿴ȫ��")
        } else {
            g.addClass("mdown");
            f.find(".morec").show();
            $(this).find("span").html(" �������")
        }
    });
    $(".mslide_udbox dt").click(function () {
        $(this).next().toggle("slow")
    });
    window.onload = function () {
        var f = parseInt(_dict_config.ss & 2);
        if (f == 2) {
            ssstop();
            ssplay($(".speaker").attr("audio"))
        }
    };
    $(".tab>h6>span").not(".wait").click(function () {
        $(this).addClass("current").siblings().removeClass("current");
        $(".tab>.tabcontent").eq($(".tab>h6>span").index(this)).addClass("block").show().siblings(".tabcontent").removeClass("block").hide()
    }).hover(function () {
        $(this).css("backgroundColor", "#eaf3f3")
    }, function () {
        $(this).css("backgroundColor", "")
    }).eq(0).trigger("click");
        var a = $("#add_scb_icon");
        if (a.length > 0) {
            $.ajax({
                url: "http://scb.dict.cn/api.php",
                dataType: "jsonp",
                data: {action: "test", id: a.attr("wid"), from: "jsonp"},
                success: function (f) {
                    if (f.ret != 0) {
                        a.addClass("yscb");
                        a.attr("onclick", 'javascript:location.href="http://scb.dict.cn/"').attr("title", "�Ѽ��룬�����������ʱ�")
                    }
                }
            })
        }
        var b = $("#user_patch_up");
        if (b.length > 0) {
            $.ajax({
                url: editorPath + "external/suppinfo/getjson/" + b.attr("dict") + "/" + b.attr("word"),
                dataType: "jsonp",
                success: function (j) {
                    var g = '<div class="user-patch-list mt20"><div class="user-patch-list-t">���Ѳ���</div><div class="user-patch-list-c">';
                    var h = j.cats;
                    var i = j.list;
                    for (var f in i) {
                        g += "<dl><dt>[" + h[i[f]["cat"]] + "] &nbsp;" + h[i[f]["cat"]] + "</dt><dd>";
                        g += '<div class="user-patch-list-cl">������: <span class="patch-u">��������</span> <span class="patch-t">' + stringToDateTime(i[f]["time"] * 1000) + "</span></div>";
                        g += '<div class="user-patch-list-cr"><span><a href="javascript:;" onclick="userPatchComment(this,\'' + f + "',1)\">����(<i>" + i[f]["n1"] + '</i>)</a></span> <span><a href="javascript:;" onclick="userPatchComment(this,\'' + f + "',2)\">����(<i>" + i[f]["n2"] + "</i>)</a></span></div>";
                        g += '<div class="cl"></div></dd></dl>'
                    }
                    g += "</div></div>";
                    b.before(g)
                }
            })
        }
    jQuery.isMobile = new RegExp("Mobile").test(window.navigator.userAgent);
    jQuery.fn.extend({
        drag: function (g) {
            var h = $(this), f = $(document.body), i = $(window);
            if (g.mover == undefined) {
                g.mover = h
            }
            if (g.pooler == undefined) {
                g.pooler = f
            }
            if (g.boundary == undefined) {
                g.boundary = false
            }
            if (g.boundary == "document") {
                g.boundary = f
            }
            if (g.deviation == undefined) {
                g.deviation = {x: 0, y: 0}
            }
            h.mousedown(function (m) {
                var l = m.clientX, k = m.clientY, j = l - g.mover.offset().left, n = k - g.mover.offset().top;
                g.pooler.mousemove(function (r) {
                    var p = r.clientX, o = r.clientY;
                    if (p != l || o != o) {
                        var s = p - j + g.deviation.x, q = o - n + g.deviation.y;
                        g.mover.css({left: s, top: q})
                    }
                });
                f.mouseup(function () {
                    g.pooler.unbind("mousemove")
                })
            })
        }, sounder: function (g) {
            var j = this;
            if (!window.audios) {
                window.audios = {}
            }
            if (!window.dtype) {
                window.dtype = jQuery.isMobile || !!(document.createElement("audio").play)
            }
            if (!window.ddaudio) {
                window.ddaudio = window.dtype ? new Audio(g) : jQuery("#daudio").get(0)
            }
            if (window.dtype) {
                window.ddaudio.src = g;
                window.ddaudio.play()
            } else {
                var f = 15, i = function () {
                    try {
                        window.ddaudio.doPlay(g);
                        clearTimeout(h)
                    } catch (k) {
                        h = setTimeout(i, f);
                        f < 1000 ? f += 15 : clearTimeout(h)
                    }
                }, h = setTimeout(i, f)
            }
            return this
        }, stopSound: function () {
            try {
                window.dtype ? window.ddaudio.pause() : window.ddaudio.doStop()
            } catch (f) {
            }
            return this
        }
    });
    var d = "position:absolute;top:-1000%;width:1px;height:1px;-khtml-opacity:0;-moz-opacity:0;opacity:0;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);";
    if (window.HTMLAudioElement && jQuery.isMobile) {
        jQuery("#daudio").length ? jQuery("#daudio").replaceWith('<audio style="' + d + '" id="daudio" controls></audio>') : $(document.body).prepend('<audio style="' + d + '" id="daudio" controls></audio>')
    }
    $(document.body).delegate("[naudio]", jQuery.isMobile ? "touchstart" : "click", function () {
        var f = "http://audio.dict.cn/" + $(this).attr("naudio");
        $.fn.sounder(f)
    })
});

(function (h, j, a, f) {
    var k, m, b, l, i;
    var g = ("placeholder" in document.createElement("input"));
    var d;
    h(function () {
        k = h("#q");
        zHolder = k.attr("placeholder");
        m = h("#tab-list>li.dict");
        b = h("#f");
        l = h("#search, #search-btn, .search-btn");
        i = h("#sx-botton");
        if (!g) {
            var o = zHolder;
            var q = k.val();
            if (!q) {
                k.val(o).removeClass("focus").addClass("blur")
            } else {
                if (o == q) {
                    k.removeClass("focus").addClass("blur")
                }
            }
        }
        var n = k.inputPrompt({
            driver: "dict",
            width: k.outerWidth(),
            trigger: h("#sugg-trigger"),
            onchoose: function (r) {
                if (n[0]) {
                    n[0].driver.query(r)
                }
            }
        });
        try {
            h("#kw").focus().select()
        } catch (p) {
        }
    })
})(jQuery, window, document);