var _host = "" + window.location.host, _href = function (a, b) {
    return /[\u4E00-\u9FA5]/g.test(b) ? "http://" + _host + "/" + encodeURIComponent(b) : a
}(window.location.href, window.location.pathname);
window.onerror = function (d, b, a) {
};

var dialog;
var _dict_config = {ss: 1};
$("#header .nav").css("background-color", "transparent");
$(".search-btn, .dosearch").val("");
var $user_id = 1, $user_name = 1,
    $user_auth = 1;
(function (a) {
    a.fn.slide = function (b) {
        var d = {slideWidth: 150, autoplay: true, duration: 15000, showSlideIndex: true};
        var b = a.extend(d, b);
        return this.each(function () {
            var r = a(this);
            var i = b;
            var j = 0;
            var f = a(".slide");
            var g = f.length;
            var n = '<object type="application/x-shockwave-flash" data="http://dict.cn/apis/output.php?id=flashID" style="width:90px;height:90px;"><param name="AllowScriptAccess" value="always"><param name="wmode" value="opaque"><param name="hasPriority" value="true"></object>';
            a("#leftControl").click(function () {
                k()
            });
            a("#rightControl").click(function () {
                m()
            });
            j = day ? day : j;

            function q() {
                j = day ? day : j;
                l(j, true);
                h(j);
                if (i.autoplay == true) {
                    p(i.duration)
                }
            }

            function m() {
                j++;
                if (j >= g) {
                    j = 0
                }
                if (f.eq(j).find("h2").html()) {
                    flashs = n.replace("flashID", f.eq(j).find("h2").attr("media"));
                    f.eq(j).find("h2").html(flashs)
                }
                l(j, true)
            }

            function k() {
                j--;
                if (j < 0) {
                    j = g - 1
                }
                if (f.eq(j).find("h2").html()) {
                    flashs = n.replace("flashID", f.eq(j).find("h2").attr("media"));
                    f.eq(j).find("h2").html(flashs)
                }
                l(j, false)
            }

            function p(o) {
                a("#slidesContainer").stop();
                a("#slidesContainer").animate({optical: 1}, o, "", function () {
                    m()
                })
            }

            function l(o, s) {
                a("#slideInner").stop();
                if (s == false || i.autoplay == false || o != 0) {
                    if (o == 0 && s) {
                        a("#slideInner").css({marginLeft: i.slideWidth / 2})
                    }
                    if (o == g - 1 && !s) {
                        a("#slideInner").css({marginLeft: i.slideWidth * (-g)})
                    }
                    a("#slideInner").animate({marginLeft: i.slideWidth * (-o)}, "", "", function () {
                        h(o);
                        if (i.autoplay == true) {
                            p(i.duration)
                        }
                    })
                } else {
                    a("#slideInner").animate({marginLeft: i.slideWidth * (-g)}, "", "", function () {
                        a("#slideInner").css("marginLeft", 0);
                        h(o);
                        if (i.autoplay == true) {
                            p(i.duration)
                        }
                    })
                }
            }

            function h(o) {
                if (i.showSlideIndex == true) {
                    a("#slideIndex").text(parseInt(o + 1) + "/" + g)
                }
            }
        })
    }
})(jQuery);
var editorPath = (_host == "dict.cn" || _host == "hanyu.dict.cn") ? "http://editor.dict.cn/" : "http://test.editor.dict.cn/";
!function (a) {
}($("#q"));
$(function () {
    $.ie6 = new RegExp("MSIE 6.0").test(window.navigator.userAgent);
    $("#more").bind({
        mouseover: function () {
            $("#more-menu").show(0)
        }, mouseout: function () {
            $("#more-menu").hide(0)
        }
    });
    $(".tab_nav li").not(".tn").click(function () {
        var f = $(this).index();
        var g = $(this).parent().parent().next();
        $(this).parent().find("li").removeClass("cur");
        $(this).addClass("cur");
        g.find("li.tab_cc").each(function () {
            if ($(this).index() == f) {
                $(this).show()
            } else {
                $(this).hide()
            }
        });
        $(this).parent().find("li.tdu img").attr("class", "up-icon")
    });
    $(".tab_nav li.tdu a").click(function () {
        var h = $(this).find("img");
        var g = $(this).parent().parent().parent();
        if (h.attr("class") == "up-icon") {
            g.next().find("li.tab_cc").hide();
            h.attr("class", "down-icon")
        } else {
            var f = g.find("ul li.cur").index();
            g.next().find("li.tab_cc").each(function () {
                if ($(this).index() == f) {
                    $(this).show()
                } else {
                    $(this).hide()
                }
            });
            h.attr("class", "up-icon")
        }
    });
    $(".obox-tab a").click(function () {
        $(this).addClass("cur").siblings().removeClass("cur").parents(".obox").find(".obox-c ul").fadeOut(0).eq($(this).index()).fadeIn(0)
    }).eq(0).trigger("click");
    $(".wd-en dl").mousemove(function () {
        $(this).addClass("wd-en-cur")
    }).mouseout(function () {
        $(this).removeClass("wd-en-cur")
    });
    $(".main .more a").click(function () {
        var g = $(this).find("img");
        var f = $(this).parent().parent();
        if (g.hasClass("mdown")) {
            f.find(".morec").hide();
            g.removeClass("mdown");
            $(this).find("span").html(" �鿴ȫ��")
        } else {
            g.addClass("mdown");
            f.find(".morec").show();
            $(this).find("span").html(" �������")
        }
    });
    $(".wd-sen-tab a").click(function () {
        var f = $(this).index();
        $(this).parent().find("a").removeClass("cur");
        $(this).addClass("cur");
        $(this).parent().next().find("ul").each(function () {
            if ($(this).index() == f) {
                $(this).show()
            } else {
                $(this).hide()
            }
        })
    });
    $(".wd-sen-tc ul li").mousemove(function () {
        $(this).addClass("cur")
    }).mouseout(function () {
        $(this).removeClass("cur")
    });
    $(".mslide_udbox dt").click(function () {
        $(this).next().toggle("slow")
    });
    window.onload = function () {
        var f = parseInt(_dict_config.ss & 2);
        if (f == 2) {
            ssstop();
            ssplay($(".speaker").attr("audio"))
        }
    };
    $(".tab>h6>span").not(".wait").click(function () {
        $(this).addClass("current").siblings().removeClass("current");
        $(".tab>.tabcontent").eq($(".tab>h6>span").index(this)).addClass("block").show().siblings(".tabcontent").removeClass("block").hide()
    }).hover(function () {
        $(this).css("backgroundColor", "#eaf3f3")
    }, function () {
        $(this).css("backgroundColor", "")
    }).eq(0).trigger("click");
    if (cur_dict == "dict") {
        var a = $("#add_scb_icon");
        if (a.length > 0) {
            $.ajax({
                url: "http://scb.dict.cn/api.php",
                dataType: "jsonp",
                data: {action: "test", id: a.attr("wid"), from: "jsonp"},
                success: function (f) {
                    if (f.ret != 0) {
                        a.addClass("yscb");
                        a.attr("onclick", 'javascript:location.href="http://scb.dict.cn/"').attr("title", "�Ѽ��룬�����������ʱ�")
                    }
                }
            })
        }
        var b = $("#user_patch_up");
        if (b.length > 0) {
            $.ajax({
                url: editorPath + "external/suppinfo/getjson/" + b.attr("dict") + "/" + b.attr("word"),
                dataType: "jsonp",
                success: function (j) {
                    var g = '<div class="user-patch-list mt20"><div class="user-patch-list-t">���Ѳ���</div><div class="user-patch-list-c">';
                    var h = j.cats;
                    var i = j.list;
                    for (var f in i) {
                        g += "<dl><dt>[" + h[i[f]["cat"]] + "] &nbsp;" + h[i[f]["cat"]] + "</dt><dd>";
                        g += '<div class="user-patch-list-cl">������: <span class="patch-u">��������</span> <span class="patch-t">' + stringToDateTime(i[f]["time"] * 1000) + "</span></div>";
                        g += '<div class="user-patch-list-cr"><span><a href="javascript:;" onclick="userPatchComment(this,\'' + f + "',1)\">����(<i>" + i[f]["n1"] + '</i>)</a></span> <span><a href="javascript:;" onclick="userPatchComment(this,\'' + f + "',2)\">����(<i>" + i[f]["n2"] + "</i>)</a></span></div>";
                        g += '<div class="cl"></div></dd></dl>'
                    }
                    g += "</div></div>";
                    b.before(g)
                }
            })
        }
    } else {
        if (cur_dict == "hanyu") {
            $("#slideshow").slide({autoplay: false, duration: 5000, showSlideNumber: true});
            setTimeout(function () {
                $("#slideshow").find("img.load").remove();
                $("#slideshow").find("#slidesContainer").show()
            }, 1000);
            $("#word-key img").remove();
            $("#word-key object").show()
        }
    }
    jQuery.isMobile = new RegExp("Mobile").test(window.navigator.userAgent);
    jQuery.fn.extend({
        drag: function (g) {
            var h = $(this), f = $(document.body), i = $(window);
            if (g.mover == undefined) {
                g.mover = h
            }
            if (g.pooler == undefined) {
                g.pooler = f
            }
            if (g.boundary == undefined) {
                g.boundary = false
            }
            if (g.boundary == "document") {
                g.boundary = f
            }
            if (g.deviation == undefined) {
                g.deviation = {x: 0, y: 0}
            }
            h.mousedown(function (m) {
                var l = m.clientX, k = m.clientY, j = l - g.mover.offset().left, n = k - g.mover.offset().top;
                g.pooler.mousemove(function (r) {
                    var p = r.clientX, o = r.clientY;
                    if (p != l || o != o) {
                        var s = p - j + g.deviation.x, q = o - n + g.deviation.y;
                        g.mover.css({left: s, top: q})
                    }
                });
                f.mouseup(function () {
                    g.pooler.unbind("mousemove")
                })
            })
        }, sounder: function (g) {
            var j = this;
            if (!window.audios) {
                window.audios = {}
            }
            if (!window.dtype) {
                window.dtype = jQuery.isMobile || !!(document.createElement("audio").play)
            }
            if (!window.ddaudio) {
                window.ddaudio = window.dtype ? new Audio(g) : jQuery("#daudio").get(0)
            }
            if (window.dtype) {
                window.ddaudio.src = g;
                window.ddaudio.play()
            } else {
                var f = 15, i = function () {
                    try {
                        window.ddaudio.doPlay(g);
                        clearTimeout(h)
                    } catch (k) {
                        h = setTimeout(i, f);
                        f < 1000 ? f += 15 : clearTimeout(h)
                    }
                }, h = setTimeout(i, f)
            }
            return this
        }, stopSound: function () {
            try {
                window.dtype ? window.ddaudio.pause() : window.ddaudio.doStop()
            } catch (f) {
            }
            return this
        }
    });
    var d = "position:absolute;top:-1000%;width:1px;height:1px;-khtml-opacity:0;-moz-opacity:0;opacity:0;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);";
    if (window.HTMLAudioElement && jQuery.isMobile) {
        jQuery("#daudio").length ? jQuery("#daudio").replaceWith('<audio style="' + d + '" id="daudio" controls></audio>') : $(document.body).prepend('<audio style="' + d + '" id="daudio" controls></audio>')
    }
    $("[audio]").die().live(jQuery.isMobile ? "touchstart" : "click", function () {
        var f = $(this).attr("audio");
        var g = "http://audio.dict.cn/" + (f.indexOf("_") != -1 ? "output.php?id=" : "mp3.php?q=") + f;
        if (/^http:/.test(f)) {
            g = f
        }
        $.fn.sounder(g)
    });
    $(document.body).delegate("[naudio]", jQuery.isMobile ? "touchstart" : "click", function () {
        var f = "http://audio.dict.cn/" + $(this).attr("naudio");
        $.fn.sounder(f)
    })
});
jQuery(function () {
    var a = '';
    var b = '';
    if ($user_auth) {
        if ($(".login").find(".more").length == 0) {
            $(".login").html(b)
        }
    } else {
        if ($(".login").find(".more").length != 0) {
            $(".login").html(a)
        }
    }
});
!function (j, b, d) {
    var k = "abcdefghijklmnopqrstuvwxyz";

    function i(l, n) {
        for (var m = 0; m < l.length; m++) {
            if (n) {
                n(m, l[m])
            }
        }
    }

    function g(m) {
        var l = "", n = m.split("/");
        i(n, function (r, p) {
            for (var q = 0; q < 5; q++) {
                var o = p % 62;
                p = (p - o) / 62;
                if (o > 9 && o < 36) {
                    l += k.charAt(o - 10)
                } else {
                    if (o > 35 && o < 62) {
                        l += k.charAt(o - 36).toUpperCase()
                    } else {
                        l += o
                    }
                }
            }
            if (r < n.length - 1) {
                l += "/"
            }
        });
        return l
    }

    function f(m) {
        var l = "", n = m.split("/");
        i(n, function (r, p) {
            var o = 0;
            for (var q = 4; q--;) {
                var s = p.charCodeAt(q);
                if (s > 64 && s < 91) {
                    o = o * 62 + s - 29
                } else {
                    if (s > 96 && s < 123) {
                        o = o * 62 + s - 87
                    } else {
                        if (s > 47 && s < 59) {
                            o = o * 62 + s - 48
                        } else {
                        }
                    }
                }
            }
            r < n.length - 1 ? l += o + "/" : l += o
        });
        return l
    }

    function a(o, n, m, v, q, s) {
        if (o.length) {
            var l = true, w = o.split("/"), t = new Array(), p = new Array();
            i(w, function (A, x) {
                if (A) {
                    t.push(decodeURIComponent(x))
                } else {
                    for (var y = 0; y < x.length / 5; y++) {
                        p.push(x.substr(y * 5, 5))
                    }
                }
            });
            if (t.join().indexOf(m) != -1) {
                if (s) {
                    s(o)
                }
                return
            }
            if (t.length >= 5) {
                t.shift()
            }
            t.push(m);
            for (var r = 0; r < p.length; r++) {
                if (p[r] == m) {
                    if (s) {
                        s(o)
                    }
                    return
                }
            }
            if (p.length >= q - 5) {
                p.shift()
            }
            p.push(v);
            var u = "";
            i(p, function (y, x) {
                u += x
            });
            i(t, function (y, x) {
                u += "/" + encodeURIComponent(x)
            });
            setCookie(n, u)
        } else {
            setCookie(n, v + "/" + encodeURIComponent(m))
        }
        if (s) {
            s(1)
        }
    }

    function h(l, m) {
        $.each(l.split("/"), function (n, o) {
            if (n) {
                m.prepend('<li><a href="http://' + _host + "/" + decodeURIComponent(o) + '">' + ($dict_dict == "ec" ? decodeURIComponent(o).substring(0, 9) : decodeURIComponent(o).substring(0, 6)) + "</a></li>")
            }
        });
        if (m.children("li").length >= 5) {
            m.append('<li><a href="/list/history.php">�鿴����?</a></li>')
        }
    }

    if ($dict_id) {
        switch ($dict_dict) {
            case"ec":
                a(j, "dicthe", $dict_query, g($("[wid]").eq(0).attr("wid")), 20, function (l) {
                    h(l, $(".floatsidenav ul:last"))
                });
                break;
            case"ce":
                a(b, "dicthc", $dict_query, g($("[wid]").eq(0).attr("wid")), 20, function (l) {
                    h(l, $(".floatsidenav ul:last"))
                });
                break;
            case"han":
                a(d, "dicthh", $dict_query, g($("[wid]").eq(0).attr("wid")), 20, function (l) {
                    h(l, $(".floatsidenav ul:last"))
                });
                break
        }
    } else {
        switch ($dict_dict) {
            case"ec":
                h(j, $(".floatsidenav ul:last"));
                break;
            case"ce":
                h(b, $(".floatsidenav ul:last"));
                break;
            case"han":
                h(d, $(".floatsidenav ul:last"));
                break
        }
    }
}();
$(function () {
    if (cur_dict == "hanyu") {
        var b = $(".search"), d = $("#q"),
            g = $('<span id="sx-botton"><img src="' + i1_home + '/i1/images/search_sx02.gif" /></span>').css({
                position: "absolute",
                right: $("#header .search").length ? ($.browser.chrome ? 136 : 110) : ($.browser.chrome ? 350 : 325),
                top: $("#header .search").length ? 72 : 57,
                cursor: "pointer"
            }).hover(function () {
                $(this).find("img").attr("src", i1_home + "/i1/images/search_sx01.gif")
            }, function () {
                $(this).find("img").attr("src", i1_home + "/i1/images/search_sx02.gif")
            }),
            f = $('<div id="dict-draw-panel"><object style="width:271px;height:201px;" type="application/x-shockwave-flash" data="' + i1_home + '/i1/swf/drawinput.swf"><param name="movie" value="' + i1_home + '/i1/swf/drawinput.swf" /><param name="AllowScriptAccess" value="always" /><param name="wmode" value="opaque" /></object></div>').css({
                position: "absolute",
                display: "none",
                zIndex: 2000
            }), a = true;
        b.append(g);
        $(document.body).prepend(f);
        g.hover(function () {
            f.css({
                left: d.outerWidth() + d.offset().left - ($.browser.chrome ? 307 : 281),
                top: d.outerHeight() + d.offset().top - 16
            }).show(0)
        }, function () {
            if (!a) {
                f.hide(0)
            }
            a = true
        });
        f.focus().bind({
            mouseup: function () {
                a = false
            }, mouseout: function () {
                if ($("#input-prompt-container").css("display") == undefined) {
                    $(this).hide();
                    a = true
                }
            }
        })
    }
});

function drawinput_select_callback(d) {
    d = String(d);
    var b = $("#q"), a = b.val();
    if (typeof d != "function") {
        b.attr("placeholder") == a ? b.val(d) : b.val(a + d)
    } else {
        d = String(d)
    }
    return false
}

(function (h, j, a, f) {
    var k, m, b, l, i;
    var g = ("placeholder" in document.createElement("input"));
    var d;
    h(function () {
        k = h("#q");
        zHolder = k.attr("placeholder");
        m = h("#tab-list>li.dict");
        b = h("#f");
        l = h("#search, #search-btn, .search-btn");
        i = h("#sx-botton");
        if (!g) {
            var o = zHolder;
            var q = k.val();
            if (!q) {
                k.val(o).removeClass("focus").addClass("blur")
            } else {
                if (o == q) {
                    k.removeClass("focus").addClass("blur")
                }
            }
        }
        var n = k.inputPrompt({
            driver: cur_dict || "dict",
            width: k.outerWidth(),
            trigger: h("#sugg-trigger"),
            //focusOnKeypress: true,
            onchoose: function (r) {
                if (n[0]) {
                    n[0].driver.query(r)
                }
            }
        });
        l.die("click").live("click", function () {
            var s = h.trim(k.val());
            var r = k.data("reci");
            if (r) {
                if (h.trim(r[0]) == s || s == "") {
                    location.href = r[3];
                    return false
                }
            }
            if (s && s != zHolder) {
                if (n && n[0]) {
                    n[0].driver.query(s);
                    return false
                } else {
                    return true
                }
            } else {
                return false
            }
        });
        try {
            h("#kw").focus().select()
        } catch (p) {
        }
        /*if ($dict_query) {
            k.val($dict_query).focus().select()
        }*/
        k.click(function () {
            k.die("focusin focusout").live({
                focusin: function () {
                    if (h.trim(k.val()) == zHolder) {
                        k.val("").css("color", "#444")
                    }
                }, focusout: function () {
                    if (!h.trim(k.val()).length) {
                        k.val(zHolder).css("color", "#999")
                    }
                }, mousedown: function () {
                    if (h.trim(k.val()) == k.attr("hotword")) {
                        k.val("").css("color", "#444")
                    }
                }
            }).trigger("focusin").unbind("click")
        }).mouseover(function () {
            /*try {
                h.browser.msie ? k.get(0).select() : k.focus().select()
            } catch (r) {
            }*/
            k.trigger("click")
        })
    })
})(jQuery, window, document);
!function (b) {
    if (b.length) {
        var a = "http://dict.dfile.cn/list/slots.php?callback=?&id=";
        b.each(function (d, f) {
            if (d != 0) {
                a += "-"
            }
            a += $(f).attr("slot")
        });
        $.getJSON(a, function (f) {
            if (f) {
                var d = {};
                $.each(f, function (g, h) {
                    if (!h.slot) {
                        h.slot = 0
                    }
                    if (!h.type) {
                        h.type = ""
                    }
                    if (!h.title) {
                        h.title = ""
                    }
                    if (!h.text) {
                        h.text = ""
                    }
                    if (!h.src) {
                        h.src = ""
                    }
                    if (!h.width) {
                        h.width = "auto"
                    }
                    if (!h.height) {
                        h.height = "auto"
                    }
                    if (!h.href) {
                        h.href = "javascript:;"
                    }
                    if (!h.html) {
                        h.html = ""
                    }
                    switch (h.type) {
                        case"text":
                            h.dom = $('<a title="' + h.text + '" target="_blank" href="' + h.href + '">' + h.text + "</a>");
                            break;
                        case"image":
                            h.dom = $('<a target="_blank" href="' + h.href + '"><img alt="' + h.title + '" src="' + h.src + '"></a>');
                            break;
                        case"slide":
                            if (h.slot) {
                                !function (i) {
                                    h.dom = i.find("li").length ? i.find("ul").append('<li><a target="_blank" href="' + h.href + '"><img alt="' + h.title + '" src="' + h.src + '"></a></li>') : $('<ul><li><a target="_blank" href="' + h.href + '"><img alt="' + h.title + '" src="' + h.src + '"></a></li></ul>');
                                    if (!d.style) {
                                        d.style = $('<style type="text/css">.slot_slide{position:relative;}.slot_slide ul{position:absolute;left:0;top:0;width:10000px;overflow:hidden;*zoom:1;}.slot_slide li{float:left;width:' + h.width + ";height:" + h.height + ";}</style>");
                                        i.before(d.style)
                                    }
                                    d.max = i.find("li").length - 1;
                                    d.move = i.find("ul");
                                    if (!d.interval) {
                                        d.index = 0;
                                        d.distance = h.width.match(/^\d+/);
                                        d.interval = setInterval(function () {
                                            d.index = d.index < d.max ? (d.index + 1) : 0;
                                            d.move.animate({left: -(d.distance * d.index)})
                                        }, 5000)
                                    }
                                }($("[slot=" + h.slot + "]"))
                            }
                            break;
                        case"flash":
                            h.dom = $('<object type="application/x-shockwave-flash" data="' + h.src + '" title="' + h.title + '" style="width:' + h.width + ";height:" + h.height + ';"><param name="movie" value="' + h.src + '" /><param name="AllowScriptAccess" value="always" /><param name="hasPriority" value="true" /><param name="wmode" value="transparent" /><param name="FlashVars" value="volume=100" /></object>');
                            break;
                        case"html":
                            h.dom = $(h.text);
                            break;
                        default:
                            break
                    }
                    if (h.slot) {
                        h.slot = $("[slot=" + h.slot + "]").addClass("slot").addClass("slot_" + h.type).css({
                            width: h.width,
                            height: h.height
                        }).empty().append(h.dom)
                    }
                })
            }
        })
    }
}($("[slot]"));

function supp_info_init() {
    $("#ext-supp-info").click(function () {
        $("#supp-info-form").slideToggle("fast");
        $("#supp-info-btn").slideToggle("fast")
    });
    $(".si-vote-1").bind("click", function () {
        if ($(this).hasClass("dis")) {
            return
        }
        var a = $(this).parents(".si-item").attr("oid");
        var b = $(this);
        $.getJSON(editorPath + "external/suppinfo/vote/" + a + "/1?callback=?", function (d) {
            if (d == 1) {
                b.addClass("dis");
                var f = parseInt(b.find("span.si-num").text());
                b.find("span.si-num").text(f + 1)
            }
        })
    });
    $(".si-vote-2").bind("click", function () {
        if ($(this).hasClass("dis")) {
            return
        }
        var a = $(this).parents(".si-item").attr("oid");
        var b = $(this);
        $.getJSON(editorPath + "external/suppinfo/vote/" + a + "/2?callback=?", function (d) {
            if (d == 1) {
                b.addClass("dis");
                var f = parseInt(b.find("span.si-num").text());
                b.find("span.si-num").text(f + 1)
            }
        })
    });
    $("#supp-info-btn").click(function () {
        $("#supp-info-form").slideToggle("fast");
        $("#supp-info-btn").slideToggle("fast")
    });
    $("#si-cont").focus(function () {
        if ($(this).val() == "��������Ҫ���������..") {
            $(this).removeClass("def").val("")
        }
    }).blur(function () {
        if ($(this).val() == "") {
            $(this).addClass("def").val("��������Ҫ���������..")
        }
    });
    $("#si-form-cmt").click(function () {
        var f = $("#si-cont").val();
        if (f == "" || f == "��������Ҫ���������..") {
            $("#si-cont").css("background", "#fcc").click(function () {
                $(this).css("background", "#fff").unbind()
            });
            return
        } else {
            if (f.length > 1000) {
                alert("������������1000�����ڣ�");
                $("#si-cont").css("background", "#fcc").click(function () {
                    $(this).css("background", "#fff").unbind()
                });
                return
            }
        }
        f = encodeURI(f);
        if ($(".si-cat:checked").length <= 0) {
            $(".si-rdos").css("background", "#fcc").click(function () {
                $(this).css("background", "#fff").unbind()
            });
            return
        } else {
            var b = $(".si-cat:checked").val()
        }
        var d = "";
        if ($("#si-email").length > 0) {
            d = $("#si-email").val();
            if (d == "" || !isEmail(d)) {
                $("#si-email").css("background", "#fcc").click(function () {
                    $(this).css("background", "#fff").unbind()
                });
                return
            }
        }
        var a = "";
        if ($("#si-captcha").length > 0) {
            a = $("#si-captcha").val();
            if (a == "") {
                $("#si-captcha").css("background", "#fcc").click(function () {
                    $(this).css("background", "#fff").unbind()
                });
                return
            }
        }
        $("#supp-info-mask").show();
        $("#supp-form-form").submit();
        if (isIE && !!document.documentMode) {
            $("#supp-info-mask").hide();
            $("#supp-info-form .si-form").hide();
            $("#supp-info-form .si-form-rst").show();
            setTimeout("supp_info_reload()", 3000)
        }
    });
    $("#si-form-ccl").click(function () {
        $("#supp-info-form").slideToggle("fast");
        $("#supp-info-btn").slideToggle("fast")
    });
    $(".si-captcha img[captcha],.si-captcha-tip").click(function () {
        var a = Math.random();
        $(".si-captcha img[captcha]").attr("src", editorPath + "external/suppinfo/captcha?" + a)
    })
}

function supp_after_submit(a) {
    $("#supp-info-mask").hide();
    if (isIE && !!document.documentMode) {
        return
    }
    if (a == 1) {
        $("#supp-info-form .si-form").hide();
        $("#supp-info-form .si-form-rst").show();
        setTimeout("supp_info_reload()", 3000)
    } else {
        if (a == -2) {
            $("#si-captcha").css("background", "#fcc").click(function () {
                $(this).css("background", "#fff").unbind()
            });
            alert("��֤�����")
        } else {
            $("#si-cont").css("background", "#fcc").click(function () {
                $(this).css("background", "#fff").unbind()
            });
            alert("�޷��ύ����������������Ƿ�����Ƿ��ַ���")
        }
    }
}

function supp_info_reload() {
    $("#supp-info-box").html("")
}

function sugg_after_submit(a) {
    $("#sugg-form-box").remove()
}

if (cur_dict == "hanyu") {
    if (window.Calendar) {
        var c = new Calendar("c");
        document.write(c)
    }

    function setTab(b) {
        for (var a = 0; a <= $(".e_rt").length; a++) {
            $("#t-" + a).find("a").css("background", "").attr("href", "javascript:setTab(" + a + ");");
            $("#tab-" + a).hide()
        }
        $("#t-" + b).find("a").css("background", "#f2f5f6").attr("href", "javascript:void();");
        $("#tab-" + b).show()
    }

    if (window.id) {
        setTab(id)
    }

    function setAgeTimer() {
        var a = document.getElementById("currdate").value;
        if (a != "") {
            $.getJSON("more.php?currday=" + a, function (g) {
                if (g) {
                    var d = g[1].indexOf("��") + 1;
                    var b = g[1].indexOf("��") + 1;
                    b = b ? b : g[1].indexOf("(") + 1;
                    var f = "<h4>" + g[0].substr(g[0].indexOf(".") + 1) + "</h4>";
                    f += '<div><p></p><div class="s"></div><div style="width:945px;float:right;">' + g[1].substr(0, d) + '</div><p></p> <p></p><div class="s"></div><div style="width:945px;float:right;">' + g[1].substr(d, b - d - 1) + "</div><p></p></div>";
                    $(".e_c").html(f)
                }
            })
        }
    }
}

function addWordScb(b, a) {
    $(b).addClass("yscb");
    $(b).attr("onclick", 'javascript:location.href="http://scb.dict.cn/"').attr("title", "�Ѽ��룬�����������ʱ�");
    $.ajax({
        url: "http://scb.dict.cn/api.php",
        dataType: "jsonp",
        jsonp: "jsonpcallback",
        data: {action: "add", word: a, from: "jsonp"},
        success: function (d) {
        }
    })
}

function wdComment(d, b, a) {
    $(d).parent().html($(d).html());
    $.ajax({
        url: editorPath + "menus/usercontent_satisfaction/evaluate/ec/" + b + "/" + a,
        dataType: "jsonp",
        jsonp: "jsonpcallback",
        success: function (f) {
        }
    })
}

function userPatch(d) {
    var a = d.content.value;
    var b = $(d).find("input:radio[name=cate]:checked").val();
    $(d).parent().hide();
    $("#user_patch_up").show();
    return false
}

function userPatchShow(a) {
    $(a).hide();
    $(a).next().slideDown()
}

function userPatchShowCancel(b) {
    var a = $(b).parent().parent().parent().parent().parent();
    a.slideUp();
    a.prev().show()
}

function userPatchShowDown(a) {
    $("#user-patch-up").hide();
    $("#user-patch-up").next().slideDown()
}

function userPatchComment(f, d, a) {
    var b = parseInt($(f).find("i").html());
    $(f).parent().html($(f).text().replace(/\d+/, b + 1));
    $.ajax({
        url: editorPath + "external/suppinfo/vote/" + d + "/" + a,
        dataType: "jsonp",
        jsonp: "jsonpcallback",
        success: function (g) {
        }
    })
}

function showFback(a) {
    if (!dialog) {
        dialog = new dDialog({
            content: "���ڼ���...",
            drag: true,
            width: 480,
            height: 330,
            skin: "class",
            title: "�������",
            position: {top: 46, right: 40},
            animate: false
        });
        dialog.show();
        $.getJSON("http://report.dict.cn/?callback=?&from_type=1&ref=" + _href, function (b) {
            dialog.setContent(b)
        })
    } else {
        dialog.show()
    }
}

function zhentiTest(b) {
    var a = new dDialog({
        title: "������ϰ",
        content: "http://dict.cn/iframes/wordtest2.php?word=" + $(b).attr("wid"),
        skin: "class",
        type: "iframe",
        modal: true,
        height: 581,
        width: 791
    });
    a.show()
}

function showYinBiao(a) {
    $.getScript(i1_home + "/i1/js/dict/yinbiao.js", function (d) {
        var b = new dDialog({
            title: "���ʴʵ�����˵��",
            content: yinbiao_html,
            skin: "class",
            modal: true,
            height: 700,
            width: 870
        });
        b.show()
    })
}

function addFavorite(b, a) {
    b = b || "http://dict.cn";
    a = a || unescape("%u6D77%u8BCD-%u5728%u7EBF%u8BCD%u5178%2C%u82F1%u8BED%u5B66%u4E60");
    try {
        window.external.addFavorite(b, a)
    } catch (d) {
        try {
            window.sidebar.addPanel(a, b, "")
        } catch (d) {
            alert(unescape("%u52A0%u5165%u6536%u85CF%u5931%u8D25%uFF0C%u8BF7%u4F7F%u7528Ctrl+D%u8FDB%u884C%u6DFB%u52A0"))
        }
    }
}

function setHomepage() {
    var b = "http://dict.cn";
    if (document.all) {
        document.body.style.behavior = "url(#default#homepage)";
        document.body.setHomePage(b)
    } else {
        if (window.sidebar) {
            if (window.netscape) {
                try {
                    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
                } catch (d) {
                    alert("�˲�����������ܾ���\n�����������ַ������'about:config'���س�\nȻ��[signed.applets.codebase_principal_support]����Ϊ'true'")
                }
            }
            var a = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
            a.setCharPref("browser.startup.homepage", "url")
        }
    }
}


function getFlashMovieObject(b) {
    if (window.document[b]) {
        return window.document[b]
    }
    if (navigator.appName.indexOf("Microsoft Internet") == -1) {
        if (document.embeds && document.embeds[b]) {
            return document.embeds[b]
        }
    } else {
        return document.getElementById(b)
    }
}


function huaciSwitch(a) {
    if (a) {
        if (typeof dictEnable != undefined) {
            setdictEnable(a)
        } else {
            unsetCookie("dicthuaci")
        }
    } else {
        if (typeof dictDisable != undefined) {
            setdictEnable(a)
        } else {
            setCookie("dicthuaci", "off", 43200)
        }
    }
}

function initFold(f) {
    var a = f.siblings(".fold");
    var d = f.siblings(".unfold");
    var b = f.find(".unfold");
    d.click(function () {
        b.hide();
        a.show();
        d.hide()
    });
    a.click(function () {
        b.show();
        d.show();
        a.hide()
    })
}

var askDialog;

function askDict(b) {
    var a = '<div id="ask_box" class="ask-box"><form action="" word="' + $(b).attr("word") + '" onsubmit="return ajaxPostAsk(this);">';
    a += '<div><textarea name="content" style="width:416px;height:20px;padding:2px;border: 1px solid #C4C4C4;"></textarea></div>';
    a += '<div><ul class="ask-box-tip"><li>1. ѯ�ʷ�Χ�����ʣ����飩�����Ｐ����������  </li><li>2. ����ϸ��飬������ƴ���������ַ���</li><li>3. ���������뾡����֤׼ȷ�����⡢������</li></ul></div>';
    a += '<div class="ask-box-btn"><a href="javascript:;" onclick="askDialog.remove();">ȡ��</a><input type="submit" class="askbtn" value="�������" /></div>';
    a += "</form>";
    a += "</div>";
    askDialog = new dDialog({
        title: "�ύ���� " + $(b).attr("word") + " ������",
        content: a,
        skin: "class",
        modal: true,
        height: 260,
        width: 452
    });
    askDialog.show()
}

function ajaxPostAsk(d) {
    var a = '<div><ul class="ask-box-tip"><li>���ǵ�רҵ��Ա���ἰʱ�Ļش��������⣬����email��վ���ŵķ�ʽ֪ͨ������Ҳ����ͨ��ҳ�����Ͻ��û��������˵���<a href="http://ask.dict.cn/">�ʺ���</a>ѡ������Լ��������б�鿴���������״̬��</li></ul></div>';
    a += '<div class="ask-box-btn"><input type="submit" class="askbtn" value="ȷ��" onclick="askDialog.remove();" /></div>';
    var b = d.content.value;
    if ($.trim(b) == "") {
        d.content.focus();
        return false
    }
    $(d).replaceWith(a);
    $.ajax({
        url: editorPath + "external/ask/addQuestion?text=" + b + "&word=" + $(d).attr("word"),
        dataType: "jsonp",
        jsonp: "jsonpcallback",
        success: function (f) {
            return false
        }
    });
    return false
}

function isEmail(b) {
    var a = /^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;
    return a.test(b)
}

function intval(a) {
    a = parseInt(a);
    return isNaN(a) ? 0 : a
}

function getPos(i) {
    var b = 0;
    var d = 0;
    var a = intval(i.style.width);
    var f = intval(i.style.height);
    var g = i.offsetWidth;
    var j = i.offsetHeight;
    while (i.offsetParent) {
        b += i.offsetLeft + (i.currentStyle ? intval(i.currentStyle.borderLeftWidth) : 0);
        d += i.offsetTop + (i.currentStyle ? intval(i.currentStyle.borderTopWidth) : 0);
        i = i.offsetParent
    }
    b += i.offsetLeft + (i.currentStyle ? intval(i.currentStyle.borderLeftWidth) : 0);
    d += i.offsetTop + (i.currentStyle ? intval(i.currentStyle.borderTopWidth) : 0);
    return {x: b, y: d, w: a, h: f, wb: g, hb: j}
}

function getScroll() {
    var d, b, a, f;
    if (document.documentElement && document.documentElement.scrollTop) {
        d = document.documentElement.scrollTop;
        b = document.documentElement.scrollLeft;
        a = document.documentElement.scrollWidth;
        f = document.documentElement.scrollHeight
    } else {
        if (document.body) {
            d = document.body.scrollTop;
            b = document.body.scrollLeft;
            a = document.body.scrollWidth;
            f = document.body.scrollHeight
        }
    }
    return {t: d, l: b, w: a, h: f}
}

function scroller(a, b) {
    if (typeof a != "object") {
        a = document.getElementById(a)
    }
    if (!a) {
        return
    }
    var d = this;
    d.el = a;
    d.p = getPos(a);
    d.s = getScroll();
    d.clear = function () {
        window.clearInterval(d.timer);
        d.timer = null
    };
    d.t = (new Date).getTime();
    d.step = function () {
        var f = (new Date).getTime();
        var g = (f - d.t) / b;
        if (f >= b + d.t) {
            d.clear();
            window.setTimeout(function () {
                d.scroll(d.p.y, d.p.x)
            }, 13)
        } else {
            st = ((-Math.cos(g * Math.PI) / 2) + 0.5) * (d.p.y - d.s.t) + d.s.t;
            sl = ((-Math.cos(g * Math.PI) / 2) + 0.5) * (d.p.x - d.s.l) + d.s.l;
            d.scroll(st, sl)
        }
    };
    d.scroll = function (g, f) {
        window.scrollTo(f, g)
    };
    d.timer = window.setInterval(function () {
        d.step()
    }, 13)
}

$(function () {
    $("#ext-supp-info").click(function () {
        if (document.documentElement && document.documentElement.scrollTop) {
            st = document.documentElement.scrollTop
        } else {
            if (document.body) {
                st = document.body.scrollTop
            }
        }
        scroller("supp-info-box", 500)
    })
});
var isIE = !!window.ActiveXObject;
var isIE6 = isIE && !window.XMLHttpRequest;
var isIE8 = isIE && !!document.documentMode;
var isIE7 = isIE && !isIE6 && !isIE8;
if (!$dict_dict) {
    $dict_dict = "ce"
}
if (!$dict_query) {
    $dict_query = ""
}
$.ajax({
    url: hc_jspath, dataType: "script", cache: true, async: true, ifModified: true, success: function () {
        if (window.dictHc) {
            !function (b, a) {
                if (b.length) {
                    dictHc.init({area: b.get(0)})
                }
                if (a.length) {
                    dictHc.init({not: a.get(0)})
                }
            }($("#content"), $("#q"))
        }
    }
});
$(function () {
    $(".sbox_morebtn").click(function () {
        $(".sbox_more").show()
    });
    $(".search").mouseleave(function () {
        $(".sbox_more").hide()
    });
    $(".sbox_more").mouseleave(function () {
        $(".sbox_more").hide()
    });
    $("#q,#search").mouseenter(function () {
        $(".sbox_more").hide()
    })
});
if (typeof(pagetype) == "undefined" || pagetype == "" || pagetype != "search") {
    try {
        !function (a) {
            a.mouseover(function (f) {
                var d = $(f.target), b = d.parents(".more");
                if (b.length) {
                    b.find(".morehover").addClass("hover");
                    b.find(".morelinks, .personinfo").css("display", "block")
                } else {
                    a.find(".morehover").removeClass("hover");
                    a.find(".morelinks, .personinfo").css("display", "none")
                }
            }).click(function () {
                a.trigger("mouseover")
            }).trigger("mouseover")
        }($(document.body));

        function feedBackForm(b) {
            if (a) {
                a.show(0)
            } else {
                var a = new dDialog({
                    content: "���ڼ���...",
                    drag: true,
                    width: 480,
                    height: 330,
                    skin: "class",
                    title: "�������",
                    position: {top: 46, right: 40},
                    animate: false
                });
                a.show(0);
                $.getJSON("http://report.dict.cn/?callback=?&from_type=1&ref=" + _href, function (d) {
                    a.setContent(d)
                })
            }
        }

        !function (a) {
            a.attr("href", a.attr("href") + "?url=" + _href)
        }($("#header .logout"))
    } catch (e) {
    }
}
;