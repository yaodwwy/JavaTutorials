<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
function info(info) {
    console.info(info);
}
function out(v){
    return JSON.stringify(v);
}

function add () {
    document.write("<br>1--------arguments= "+out(arguments));
    var args = Array.prototype.slice.call(arguments);
    document.write("<br>2--------args= "+out(args));

    var fn = function () {
        document.write("<br>3--------arguments= "+arguments);
        var arg_fn = Array.prototype.slice.call(arguments);
        document.write("<br>4--------arg_fn= "+out(arg_fn));
        var re = add.apply(null, args.concat(arg_fn));
        return re;
    }

    fn.valueOf = function () {
        document.write("<br>5--------");
        return args.reduce(function(a, b) {
            return a + b;
        })
    }

    return fn;
}


    var v1 = add(1)(2); // 3
    document.write("<br>v1="+v1);
    var v2 = add(1, 2, 3)(10); // 16
    document.write("<br>v2="+v2);
    var v3 = add(1)(2)(3)(4)(undefined)(6)(1)(2)(3)(4)(5)(6)(1)(2)(3)(4)(5)(6); // 15
    document.write("<br>v3="+v3);

var obj = {name: 'Coco'};
var str = '123' + obj;
console.log(str);  // 123[object Object]
</script>
</body>
</html>